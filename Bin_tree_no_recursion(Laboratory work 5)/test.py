import unittest
from main import bin_tree_bfs
from main import bin_tree_No_recursion


class TestBinTree(unittest.TestCase):
    """
    Тестовый класс для проверки функций генерации бинарного дерева.

    Содержит тестовые случаи для функций bin_tree_bfs и bin_tree_No_recursion,
    проверяющие корректность генерации деревьев
    """

    def test_bin_bfs(self):
        """
        Проверяет корректность генерации дерева с помощью BFS метода.

        Тестирует создание дерева высотой 3 с корнем 11 и стандартными
        функциями для потомков (x**2 и x**2+2).
        """
        self.assertEqual(bin_tree_bfs(3, 11), {'11': [{'121': [{'14641': [{'214358881': []}, {'214358883': []}]},
                                                               {'14643': [{'214417449': []}, {'214417451': []}]}]}, {
                                                          '123': [{'15129': [{'228886641': []}, {'228886643': []}]},
                                                                  {'15131': [{'228947161': []}, {'228947163': []}]}]}]}
                         )

    def test_bin(self):
        """
        Проверяет корректность генерации дерева с помощью нерекурсивного метода.

        Тестирует создание дерева высотой 3 с корнем 11 и стандартными
        функциями для потомков (x**2 и x**2+2).
        """
        self.assertEqual(bin_tree_No_recursion(3, 11),
                         {'11': [{'121': [{'14641': [{'214358881': []}, {'214358883': []}]},
                                          {'14643': [{'214417449': []}, {'214417451': []}]}]}, {
                                     '123': [{'15129': [{'228886641': []}, {'228886643': []}]},
                                             {'15131': [{'228947161': []}, {'228947163': []}]}]}]}
                         )

    def test_bin_zero(self):
        """
        Проверяет обработку нулевой высоты в нерекурсивном методе.

        Дерево высотой 0 должно содержать только корневой узел без потомков.
        """
        self.assertEqual(bin_tree_No_recursion(0, 11), {'11': []})

    def test_bin_bfs_zero(self):
        """
        Проверяет обработку нулевой высоты в BFS методе.

        Дерево высотой 0 должно содержать только корневой узел без потомков.
        """
        self.assertEqual(bin_tree_bfs(0, 11), {'11': []})

    def test_type_error_1(self):
        """
        Проверяет обработку TypeError при неверном типе высоты в нерекурсивном методе.

        Ожидается исключение TypeError при передаче строки вместо числа для параметра height.
        """
        with self.assertRaises(TypeError):
            bin_tree_No_recursion('4', 11)

    def test_type_error_2(self):
        """
        Проверяет обработку TypeError при неверном типе высоты в BFS методе.

        Ожидается исключение TypeError при передаче строки вместо числа для параметра height.
        """
        with self.assertRaises(TypeError):
            bin_tree_bfs('4', 11)

    def test_type_error_3(self):
        """
        Проверяет обработку TypeError при неверном типе корня в нерекурсивном методе.

        Ожидается исключение TypeError при передаче строки вместо числа для параметра root.
        """
        with self.assertRaises(TypeError):
            bin_tree_No_recursion(4, "11")

    def test_bin_tree_bfs_custom_functions(self):
        """
        Проверяет генерацию дерева с пользовательскими функциями потомков в BFS методе.

        Использует простые арифметические функции (x+1 и x+2) вместо стандартных.
        """
        self.assertEqual(bin_tree_bfs(3, 1, l_b=lambda x: x + 1, r_b=lambda x: x + 2), {
            '1': [{'2': [{'3': [{'4': []}, {'5': []}]}, {'4': [{'5': []}, {'6': []}]}]},
                  {'3': [{'4': [{'5': []}, {'6': []}]}, {'5': [{'6': []}, {'7': []}]}]}]})

    def test_bin_tree_custom_functions(self):
        """
        Проверяет генерацию дерева с пользовательскими функциями потомков в нерекурсивном методе.

        Использует простые арифметические функции (x+1 и x+2) вместо стандартных.
        """
        self.assertEqual(bin_tree_No_recursion(3, 1, l_b=lambda x: x + 1, r_b=lambda x: x + 2), {
            '1': [{'2': [{'3': [{'4': []}, {'5': []}]}, {'4': [{'5': []}, {'6': []}]}]},
                  {'3': [{'4': [{'5': []}, {'6': []}]}, {'5': [{'6': []}, {'7': []}]}]}]})


if __name__ == '__main__':
    """Запуск всех тестовых случаев, определенных в классе TestBinTree."""
    unittest.main()